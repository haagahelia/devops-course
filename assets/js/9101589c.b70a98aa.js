"use strict";(self.webpackChunkdevops=self.webpackChunkdevops||[]).push([[99],{55:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/github_tags-936a1ca5d212dffdd4ce76142b658210.png"},3069:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/github_release-7ddf72c45400c61e6d7c24d81b482afb.png"},6262:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"deployment/tags","title":"Tags","description":"Creating tags","source":"@site/docs/deployment/tags.md","sourceDirName":"deployment","slug":"/deployment/tags","permalink":"/devops-course/docs/deployment/tags","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/deployment/tags.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Tags"},"sidebar":"tutorialSidebar","previous":{"title":"Versioning","permalink":"/devops-course/docs/deployment/versioning"},"next":{"title":"Security & Monitoring","permalink":"/devops-course/docs/category/security--monitoring"}}');var i=s(4848),a=s(8453);const r={sidebar_position:4,title:"Tags"},o=void 0,c={},l=[{value:"Creating tags",id:"creating-tags",level:3},{value:"Automate with CI/CD pipelines using tags.",id:"automate-with-cicd-pipelines-using-tags",level:3},{value:"Github releases",id:"github-releases",level:3},{value:"Further reading",id:"further-reading",level:3}];function d(e){const t={a:"a",code:"code",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h3,{id:"creating-tags",children:"Creating tags"}),"\n",(0,i.jsxs)(t.p,{children:["Git supports ",(0,i.jsx)(t.strong,{children:"tags"}),", which are commonly used to mark specific points in a project's history, such as release versions.  When you create a tag in Git, it points to a specific commit in the repository's history. This means the tag represents the state of the entire repository (all files and directories) at the time of that commit. There are two types of tags: ",(0,i.jsx)(t.strong,{children:"lightweight"})," and ",(0,i.jsx)(t.strong,{children:"annotated"}),". Annotated tags include metadata about the release and are the preferred choice."]}),"\n",(0,i.jsx)(t.p,{children:"To create a new annotated tag, use the following command:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'git tag -a tag_name -m "comment"\n'})}),"\n",(0,i.jsxs)(t.p,{children:[", where ",(0,i.jsx)(t.code,{children:"-m"})," specifies a tag message."]}),"\n",(0,i.jsxs)(t.p,{children:["Tag names typically follow semantic versioning and often start with a ",(0,i.jsx)(t.code,{children:"v"}),". For example:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'git tag -a v1.0.0 -m "First production release"\n'})}),"\n",(0,i.jsx)(t.p,{children:"You can list all tags using the following command:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"git tag\n"})}),"\n",(0,i.jsx)(t.p,{children:"Let's use our example Node.js express project that we have used to create CI/CD pipeline. Create a new tag using the following command in terminal:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'git tag -a v1.0.0 -m "First production release"\n'})}),"\n",(0,i.jsx)(t.p,{children:"If you created a tag in your local repository but it hasn't been pushed to GitHub, you need to explicitly push the tag to the remote repository. By default, git push does not automatically push tags unless specified. Push tag to the Github repository by using the following command:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"git push origin v1.0.0\n"})}),"\n",(0,i.jsx)(t.p,{children:"Now, if you navigate to your Github repository, you should see the tag in your repository unde the Releases."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Github tags",src:s(55).A+"",width:"472",height:"562"})}),"\n",(0,i.jsx)(t.p,{children:"You can also create tags directly from the Github use interface."}),"\n",(0,i.jsx)(t.h3,{id:"automate-with-cicd-pipelines-using-tags",children:"Automate with CI/CD pipelines using tags."}),"\n",(0,i.jsxs)(t.p,{children:["Now, in this case, we want to deploy our project only when a new release is created (a tag is added). Open the ",(0,i.jsx)(t.code,{children:"ci_pipeline.yaml"})," file. As you remember, the ",(0,i.jsx)(t.code,{children:"on"})," section defines the events that trigger the workflow. To ensure the workflow runs when new tags are added, include the ",(0,i.jsx)(t.code,{children:"tags"})," configuration under the ",(0,i.jsx)(t.code,{children:"on"})," section."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"name: Node.js CI/CD\n\non:\n  push:\n    branches: [main]\n    //highlight-start\n    tags: ['*']\n    //highlight-end\n  pull_request:\n    branches: [main]\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Then we can used ",(0,i.jsx)(t.code,{children:"if"})," to execute deployment job only if a new tag is added."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"# Only run this step if a tag is pushed\nif: startsWith(github.ref, 'refs/tags/')\n  env:\n    deploy_url: ${{ secrets.RENDER_DEPLOY_HOOK_URL }}\n  run: |\n    curl \"$deploy_url\"\n"})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"github.ref"})," is built-in GitHub Actions context variable. It represents the Git reference (e.g., branch or tag) that triggered the workflow. Now, in our case the ",(0,i.jsx)(t.code,{children:"github.ref"})," is ",(0,i.jsx)(t.code,{children:"refs/tags/v1.0.0"}),". If a branch is pushed, ",(0,i.jsx)(t.code,{children:"github.ref"})," might be ",(0,i.jsx)(t.code,{children:"refs/heads/main"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["You can read more about ",(0,i.jsx)(t.code,{children:"if"})," statement syntax ",(0,i.jsx)(t.a,{href:"https://docs.github.com/en/actions/writing-workflows/workflow-syntax-for-github-actions#jobsjob_idif",children:"here"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"Now, if you make some code changes, the workflow will run linting and tests but it doesn't deploy our app. When you add a new tag then app is also deployed."}),"\n",(0,i.jsx)(t.h3,{id:"github-releases",children:"Github releases"}),"\n",(0,i.jsxs)(t.p,{children:["You can create a release in GitHub from an existing tag. To do this, go to the main page of your repository and click the ",(0,i.jsx)(t.strong,{children:"Create a new release"})," link. From the ",(0,i.jsx)(t.code,{children:"Choose a tag"})," dropdown, select the desired tag. Add a title and release notes, then click the ",(0,i.jsx)(t.strong,{children:"Publish release"})," button when you're ready."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Github tags",src:s(3069).A+"",width:"1408",height:"589"})}),"\n",(0,i.jsx)(t.p,{children:"GitHub will automatically include links to download a zip file and a tarball containing the contents of the repository at the point of the tag's creation."}),"\n",(0,i.jsx)(t.p,{children:"A GitHub Release is based on a Git tag but provides extra metadata like release notes, attached binaries/artifacts, and changelogs. It\u2019s more user-friendly and meant for distributing packaged versions of software."}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h3,{id:"further-reading",children:"Further reading"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://git-scm.com/book/en/v2/Git-Basics-Tagging",children:"https://git-scm.com/book/en/v2/Git-Basics-Tagging"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://docs.github.com/en/repositories/releasing-projects-on-github/about-releases",children:"https://docs.github.com/en/repositories/releasing-projects-on-github/about-releases"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>o});var n=s(6540);const i={},a=n.createContext(i);function r(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);