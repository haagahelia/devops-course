"use strict";(self.webpackChunkdevops=self.webpackChunkdevops||[]).push([[475],{1052:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/codeql_2-8c6aee6dd27833938f968f4d4bdcca8e.png"},2967:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"monitoring/security","title":"Security","description":"DevSecOps is the practice of integrating security into every stage of the software development lifecycle, combining development (Dev), security (Sec), and operations (Ops). It emphasizes collaboration between development, security, and operations teams to identify and address security issues early and continuously.","source":"@site/docs/monitoring/security.md","sourceDirName":"monitoring","slug":"/monitoring/security","permalink":"/devops-course/docs/monitoring/security","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/monitoring/security.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Security"},"sidebar":"tutorialSidebar","previous":{"title":"Log Monitoring","permalink":"/devops-course/docs/monitoring/logmonitoring"},"next":{"title":"Secrets","permalink":"/devops-course/docs/monitoring/secrets"}}');var s=t(4848),o=t(8453);const a={sidebar_position:4,title:"Security"},r=void 0,c={},l=[{value:"Automated security testing",id:"automated-security-testing",level:3},{value:"CodeQL",id:"codeql",level:4},{value:"Example",id:"example",level:4},{value:"GitHub Dependabot",id:"github-dependabot",level:4},{value:"Further Reading",id:"further-reading",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"DevSecOps"})," is the practice of integrating security into every stage of the software development lifecycle, combining development (Dev), security (Sec), and operations (Ops). It emphasizes collaboration between development, security, and operations teams to identify and address security issues early and continuously."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Practical examples of DevSecOps:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Automated Security Testing:"})," Integrating tools like CodeQL or SonarQube into CI/CD pipelines to automatically scan code for vulnerabilities."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Container Security:"})," Using tools such as Trivy or Aqua Security to scan container images for known vulnerabilities before deployment."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Infrastructure as Code (IaC) Scanning:"})," Employing tools like Checkov or Terraform Compliance to ensure infrastructure code follows security best practices."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Secrets Management:"})," Implementing solutions like HashiCorp Vault or Azure Key Vault to securely manage sensitive information such as API keys and passwords."]}),"\n",(0,s.jsx)(n.h3,{id:"automated-security-testing",children:"Automated security testing"}),"\n",(0,s.jsx)(n.p,{children:"Automated security testing in software development is the practice of using tools and scripts to automatically scan code and dependencies for security vulnerabilities throughout the development lifecycle. This process helps identify issues such as insecure code patterns, known vulnerabilities in libraries, misconfigurations, and secrets exposure before software is deployed."}),"\n",(0,s.jsx)(n.h4,{id:"codeql",children:"CodeQL"}),"\n",(0,s.jsx)(n.p,{children:"CodeQL is a code analysis engine developed by GitHub. It's used to automatically find security vulnerabilities and bugs in source code by treating code as data and querying it like a database. CodeQL lets you write queries in a declarative language (similar to SQL) to examine the relationships and flow in your codebase."}),"\n",(0,s.jsxs)(n.p,{children:["You can run CodeQL from the command line (",(0,s.jsx)(n.a,{href:"https://docs.github.com/en/code-security/codeql-cli/getting-started-with-the-codeql-cli/about-the-codeql-cli",children:"CodeQL CLI"}),") or integrate with Visual Studio Code using the ",(0,s.jsx)(n.a,{href:"https://marketplace.visualstudio.com/items?itemName=github.vscode-codeql",children:"CodeQL extension"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,s.jsxs)(n.p,{children:["In this course, we learn how to integrate CodeQL to your Github workflows. Clone the following Java project ",(0,s.jsx)(n.a,{href:"https://github.com/juhahinkula/codeql-demo.git",children:"repository"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Repository should be ",(0,s.jsx)(n.strong,{children:"public"})," to enable security scan. To use CodeQL with private repository, it should be owned by organization with GitHub Code Security enabled."]})}),"\n",(0,s.jsxs)(n.p,{children:["The project is a basic user management system built with Spring Boot and Gradle. Our goal is to set up a CodeQL analysis workflow that runs automatically whenever code is pushed to the main branch. You don't need to build Java projects to run CodeQL analysis. You can Read more about that in ",(0,s.jsx)(n.a,{href:"https://docs.github.com/en/code-security/code-scanning/creating-an-advanced-setup-for-code-scanning/codeql-code-scanning-for-compiled-languages",children:"code scanning for compiled languages"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["To begin, create a new workflow file named ",(0,s.jsx)(n.code,{children:"codeql.yml"})," in the ",(0,s.jsx)(n.code,{children:".github\\workflows"})," directory. Specify a descriptive name for the workflow and configure the events that will trigger its execution:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'name: "CodeQL Analysis"\n\non:\n  push:\n    branches: [ "main" ]\n  pull_request:\n    branches: [ "main" ]\n'})}),"\n",(0,s.jsx)(n.p,{children:"Next, add a first job that runs on the latest Ubuntu virtual environment."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"permissions"})," grants the workflow minimal permissions needed to read repository contents and actions, and write security events."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"jobs:\n  analyze:\n    name: Analyze (${{ matrix.language }})\n    runs-on: ubuntu-latest\n    permissions:\n      actions: read\n      contents: read\n      security-events: write\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"strategy"})," defines how jobs are run. The ",(0,s.jsx)(n.code,{children:"fail-fast: false"})," define that jobs will run to completion even if one fails. The ",(0,s.jsx)(n.code,{children:"matrix"})," contains one variable, ",(0,s.jsx)(n.code,{children:"language"}),", set to ",(0,s.jsx)(n.code,{children:"['java-kotlin']"}),". If you add more languages (e.g., ['java', 'node']), the job would run once for each language."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"    strategy:\n      fail-fast: false\n      matrix:\n        language: [ 'java' ]  \n"})}),"\n",(0,s.jsx)(n.p,{children:"The first step checks out your repository\u2019s code onto the runner. It makes your code available for the next steps in the workflow."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"steps:\n    - name: Checkout repository\n      uses: actions/checkout@v4\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Setup Java"})," step installs Java 23 using the Temurin distribution."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"- name: Setup Java\n  uses: actions/setup-java@v4\n  with:\n    java-version: '23'\n    distribution: 'temurin'\n"})}),"\n",(0,s.jsx)(n.p,{children:"The last steps handles the CodeQL analysis."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Initialize CodeQL"})," step sets up CodeQL for the workflow. It specifies which programming languages to analyze (using ",(0,s.jsx)(n.code,{children:"${{ matrix.language }}"})," so it can run for multiple languages if needed)."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Autobuild"})," attempts to automatically build the Java project (required for accurate analysis)."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Perform CodeQL Analysis"})," step runs the actual CodeQL analysis. It scans your codebase for security issues and vulnerabilities. The ",(0,s.jsx)(n.code,{children:"category"})," property helps organize the results by language."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'    - name: Initialize CodeQL\n      uses: github/codeql-action/init@v3\n      with:\n        languages: ${{ matrix.language }}\n      \n    - name: Autobuild\n        uses: github/codeql-action/autobuild@v3\n\n    - name: Perform CodeQL Analysis\n      uses: github/codeql-action/analyze@v3\n      with:\n        category: "/language:${{matrix.language}}"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Finally, the whole workflow looks the following:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'name: "CodeQL Analysis"\n\non:\n  push:\n    branches: [ "main" ]\n  pull_request:\n    branches: [ "main" ]\n\njobs:\n  analyze:\n    name: Analyze (${{ matrix.language }})\n    runs-on: ubuntu-latest\n    permissions:\n      actions: read\n      contents: read\n      security-events: write\n\n    strategy:\n      fail-fast: false\n      matrix:\n        language: [ \'java\' ]  \n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Setup Java\n        uses: actions/setup-java@v4\n        with:\n          java-version: \'23\'\n          distribution: \'temurin\'\n\n      - name: Initialize CodeQL\n        uses: github/codeql-action/init@v3\n        with:\n          languages: ${{ matrix.language }}\n\n      - name: Autobuild\n        uses: github/codeql-action/autobuild@v3\n\n      - name: Perform CodeQL Analysis\n        uses: github/codeql-action/analyze@v3\n        with:\n          category: "/language:${{matrix.language}}"\n'})}),"\n",(0,s.jsx)(n.p,{children:"The workflow is now set up. After its first successful run, you should see a security issue detected in the Security tab, as shwon in the image below."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"CodeQL analysis result",src:t(8087).A+"",width:"900",height:"576"})}),"\n",(0,s.jsx)(n.p,{children:'Navigate to the Security tab, select "Code scanning" from the left menu, and you should see the security alert listed there.'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"CodeQL analysis issue",src:t(1052).A+"",width:"966",height:"433"})}),"\n",(0,s.jsx)(n.p,{children:"When you open the security alert, you'll find detailed information about the identified issue. To fix it, you can create a new branch and begin working on a fix. Additionally, you can use Copilot to help automatically resolve the issue."}),"\n",(0,s.jsxs)(n.p,{children:["You can also write your own custom CodeQL queries and you can read more about CodeQL syntax in ",(0,s.jsx)(n.a,{href:"https://codeql.github.com/docs/codeql-overview/",children:"https://codeql.github.com/docs/codeql-overview/"}),"."]}),"\n",(0,s.jsxs)(n.admonition,{title:"TASK: OWASP WebGoat",type:"info",children:[(0,s.jsxs)(n.p,{children:["OWASP ",(0,s.jsx)(n.a,{href:"https://owasp.org/www-project-webgoat/",children:"WebGoat"})," is an intentionally insecure web application created by the Open Web Application Security Project (OWASP) for educational purposes."]}),(0,s.jsxs)(n.p,{children:["Fork WebGoat repository from ",(0,s.jsx)(n.a,{href:"https://github.com/WebGoat/WebGoat/wiki/Forking-WebGoat-in-GitHub",children:"https://github.com/WebGoat/WebGoat/wiki/Forking-WebGoat-in-GitHub"})]}),(0,s.jsx)(n.p,{children:"After cloning the repository, you can start WebGoat using Docker:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"docker run -it -p 127.0.0.1:8080:8080 -p 127.0.0.1:9090:9090 webgoat/webgoat\n"})}),(0,s.jsxs)(n.p,{children:["Once the container is running, open your browser and navigate to ",(0,s.jsx)(n.code,{children:"localhost:8080/WebGoat"})," to access the WebGoat application."]}),(0,s.jsx)(n.p,{children:"Next, create a GitHub Actions workflow to your WebGoat repository to run CodeQL analysis on the WebGoat Java source code. WebGoat is intentionally vulnerable, so CodeQL will detect many issues."})]}),"\n",(0,s.jsx)(n.h4,{id:"github-dependabot",children:"GitHub Dependabot"}),"\n",(0,s.jsx)(n.p,{children:"GitHub Dependabot is a built-in tool in GitHub that helps you keep your dependencies up to date and secure. It automatically checks your project\u2019s dependencies for outdated or insecure libraries. When it finds a new version or a security vulnerability, Dependabot can automatically create pull requests to update the affected dependencies."}),"\n",(0,s.jsxs)(n.p,{children:["To get practical experience with GitHub Dependabot, it is recommended that you follow the official ",(0,s.jsx)(n.a,{href:"https://docs.github.com/en/code-security/getting-started/dependabot-quickstart-guide",children:"Dependabot quickstart tutorial"}),"."]}),"\n",(0,s.jsxs)(n.admonition,{title:"TASK:",type:"info",children:[(0,s.jsx)(n.p,{children:"Follow the Dependabot quickstart guide to learn more about Dependabot. This guide walks you through setting up and enabling Dependabot, viewing Dependabot alerts, and updating your repository to use a secure version of the dependency."}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://docs.github.com/en/code-security/getting-started/dependabot-quickstart-guide",children:"https://docs.github.com/en/code-security/getting-started/dependabot-quickstart-guide"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"further-reading",children:"Further Reading"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.microsoft.com/en-in/security/business/security-101/what-is-devsecops",children:"https://www.microsoft.com/en-in/security/business/security-101/what-is-devsecops"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.redhat.com/en/topics/devops/what-is-devsecops",children:"https://www.redhat.com/en/topics/devops/what-is-devsecops"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://codeql.github.com/",children:"http://codeql.github.com/"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8087:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/codeql_1-14533d07f5c9043927c05665f9b9949b.png"},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var i=t(6540);const s={},o=i.createContext(s);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);